#!/bin/bash

echo "Updating config symlinks..."

CONFIG_DIR="$HOME/.local/share/omarchy-overrides/config"

for dir in "$CONFIG_DIR"/*/; do
  if [ -d "$dir" ]; then
    dir_name=$(basename "$dir")
    target_dir="$HOME/.config/$dir_name"
    mkdir -p "$target_dir"

    for item in "$dir"*; do
      # Skip if no items match the pattern
      [ ! -e "$item" ] && continue

      item_name=$(basename "$item")
      target_item="$target_dir/$item_name"

      if [ -e "$target_item" ] || [ -L "$target_item" ]; then
        rm -rf "$target_item"
      fi

      ln -s "$item" "$target_item"
    done
  fi
done
